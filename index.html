<!doctype html>

<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Telegram Sender — GitHub Pages</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen py-10">
  <div class="max-w-3xl mx-auto bg-white shadow-lg rounded-xl p-8">
    <h1 class="text-2xl font-semibold text-gray-700 mb-2">GitHub Pages থেকে Telegram এ পাঠান</h1>
    <p class="text-gray-600 text-sm mb-6">Bot API Token এবং Chat ID দিয়ে এখান থেকে সরাসরি মেসেজ, ছবি বা ভিডিও পাঠাতে পারবেন।</p><div class="grid gap-4">
  <div>
    <label class="font-medium">Bot API Token</label>
    <input id="token" class="w-full mt-1 p-3 border rounded-lg focus:ring-2 focus:ring-blue-400" type="text" placeholder="123456:ABC-DEF..." />
  </div>

  <div>
    <label class="font-medium">Chat ID</label>
    <input id="chatId" class="w-full mt-1 p-3 border rounded-lg focus:ring-2 focus:ring-blue-400" type="text" placeholder="123456789" />
  </div>

  <div class="flex gap-3">
    <button id="saveBtn" class="flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600">সেভ</button>
    <button id="clearBtn" class="flex-1 bg-red-500 text-white py-2 rounded-lg hover:bg-red-600">ক্লিয়ার</button>
  </div>
</div>

<hr class="my-6" />

<h2 class="text-xl font-semibold mb-3">টেক্সট পাঠান</h2>

<textarea id="messageText" rows="4" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400" placeholder="আপনার বার্তা লিখুন..."></textarea>

<div class="flex gap-3 mt-3">
  <button id="sendTextBtn" class="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">টেক্সট পাঠান</button>
  <button id="previewBtn" class="flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">প্রিভিউ</button>
</div>

<hr class="my-6" />

<h2 class="text-xl font-semibold mb-3">ছবি / ভিডিও পাঠান</h2>

<input id="fileInput" type="file" accept="image/*,video/*" class="w-full p-3 border rounded-lg bg-gray-50" />

<div class="flex gap-3 mt-3">
  <button id="sendFileBtn" class="flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600">ফাইল পাঠান</button>
  <button id="sendByUrlBtn" class="flex-1 bg-yellow-500 text-white py-2 rounded-lg hover:bg-yellow-600">URL থেকে পাঠান</button>
</div>

<input id="fileUrl" type="text" class="w-full mt-3 p-3 border rounded-lg" placeholder="https://example.com/file.jpg" />

<div id="status" class="mt-6 bg-gray-50 p-4 rounded-lg border text-sm h-48 overflow-auto"></div>

  </div><script>
function el(id){return document.getElementById(id)}
function log(msg){el('status').textContent = msg + "
" + el('status').textContent}

const TOKEN_KEY='tg_bot_token_v1'
const CHAT_KEY='tg_chat_id_v1'

token.value = localStorage.getItem(TOKEN_KEY)||''
chatId.value = localStorage.getItem(CHAT_KEY)||''

saveBtn.onclick = ()=>{
  localStorage.setItem(TOKEN_KEY, token.value.trim())
  localStorage.setItem(CHAT_KEY, chatId.value.trim())
  log('Token ও Chat ID সেভ হয়েছে')
}

clearBtn.onclick = ()=>{
  localStorage.clear()
  token.value=''
  chatId.value=''
  log('ডাটা ক্লিয়ার করা হয়েছে')
}

function getToken(){return token.value.trim()}
function getChat(){return chatId.value.trim()}

sendTextBtn.onclick = async()=>{
  const t=getToken(), c=getChat(), text=messageText.value.trim()
  if(!t||!c||!text){log('সব ফিল্ড পূরণ করুন');return}

  try{
    const res = await fetch(`https://api.telegram.org/bot${t}/sendMessage`,{
      method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({chat_id:c,text})
    })
    const d=await res.json()
    log('টেক্সট পাঠানো হয়েছে: '+JSON.stringify(d))
  }catch(e){log('সমস্যা: '+e)}
}

sendFileBtn.onclick = async()=>{
  const t=getToken(), c=getChat(), f=fileInput.files[0]
  if(!t||!c||!f){log('সব ফিল্ড পূরণ করুন');return}

  const isImage=f.type.startsWith('image/')
  const method=isImage?'sendPhoto':'sendDocument'
  const form=new FormData()
  form.append('chat_id',c)
  form.append(isImage?'photo':'document',f)

  try{
    const r=await fetch(`https://api.telegram.org/bot${t}/${method}`,{method:'POST',body:form})
    log('ফাইল পাঠানো হয়েছে: '+JSON.stringify(await r.json()))
  }catch(e){log('সমস্যা: '+e)}
}

sendByUrlBtn.onclick = async()=>{
  const t=getToken(), c=getChat(), url=fileUrl.value.trim()
  if(!t||!c||!url){log('সব পূরণ করুন');return}

  let method='sendPhoto'
  if(url.endsWith('.mp4')) method='sendVideo'

  try{
    const r=await fetch(`https://api.telegram.org/bot${t}/${method}`,{
      method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({chat_id:c,[method==='sendPhoto'?'photo':'video']:url})
    })
    log('URL পাঠানো হয়েছে: '+JSON.stringify(await r.json()))
  }catch(e){log('সমস্যা: '+e)}
}

log('UI প্রস্তুত')
</script></body>
</html>
